<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Some Basic Functions that I Use Frequently • socsci</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Some Basic Functions that I Use Frequently">
<meta property="og:description" content="This package is a bunch of functions that I have written to solve problems for myself and others. For instance one creates a simple count with frequencies. Both with and without weights. Another calculates means with 95 percent or 84 percent confidence intervals. ">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">socsci</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/socsci.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ryanburge/socsci">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<div id="socsci-functions-for-analyzing-survey-data" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#socsci-functions-for-analyzing-survey-data" class="anchor"></a>SocSci: Functions for Analyzing Survey Data</h1></div>
<div id="author" class="section level2">
<h2 class="hasAnchor">
<a href="#author" class="anchor"></a>Author</h2>
<p>Ryan Burge <a href="https://www.ryanburge.net" class="uri">https://www.ryanburge.net</a></p>
<p>Instructor of Political Science, Eastern Illinois University, Charleston IL</p>
<p><a href="https://twitter.com/ryanburge"><img src="https://img.shields.io/twitter/url/http/shields.io.svg?style=social"></a> <a href="https://saythanks.io/to/ryanburge"><img src="https://img.shields.io/badge/say%20-thanks-blue.svg" alt="saythanks"></a> <img src="https://img.shields.io/badge/version-1.0-blue.svg" alt="GitHub release"></p>
<hr>
<div id="installation" class="section level3">
<h3 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h3>
<p>You can install:</p>
<ul>
<li>
<p>the latest development version from GitHub with</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"devtools"</span>)</a>
<a class="sourceLine" id="cb1-2" title="2">devtools<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/devtools/man/reexports.html">install_github</a></span>(<span class="st">"ryanburge/socsci"</span>)</a></code></pre></div>
</li>
</ul>
</div>
</div>
<div id="there-are-just-a-handful-of-functions-to-the-package-right-now" class="section level2">
<h2 class="hasAnchor">
<a href="#there-are-just-a-handful-of-functions-to-the-package-right-now" class="anchor"></a>There are just a handful of functions to the package right now</h2>
</div>
<div id="counting-things" class="section level2">
<h2 class="hasAnchor">
<a href="#counting-things" class="anchor"></a>Counting Things</h2>
<p>I love the functionality of tabyl, but it doesn’t take a weight variable. Here’s the simple version <code><a href="reference/ct.html">ct()</a></code></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(socsci)</a>
<a class="sourceLine" id="cb2-2" title="2">cces &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">"https://raw.githubusercontent.com/ryanburge/blocks/master/cces.csv"</span>)</a>
<a class="sourceLine" id="cb2-3" title="3"></a>
<a class="sourceLine" id="cb2-4" title="4">cces <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="st">  </span><span class="kw"><a href="reference/ct.html">ct</a></span>(race)</a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co">#&gt; # A tibble: 8 x 3</span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co">#&gt;    race     n   pct</span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="co">#&gt;   &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="co">#&gt; 1     1   368 0.736</span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="co">#&gt; 2     2    54 0.108</span></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="co">#&gt; 3     3    38 0.076</span></a>
<a class="sourceLine" id="cb2-12" title="12"><span class="co">#&gt; 4     4    13 0.026</span></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="co">#&gt; 5     5     7 0.014</span></a>
<a class="sourceLine" id="cb2-14" title="14"><span class="co">#&gt; 6     6     9 0.018</span></a>
<a class="sourceLine" id="cb2-15" title="15"><span class="co">#&gt; 7     7     8 0.016</span></a>
<a class="sourceLine" id="cb2-16" title="16"><span class="co">#&gt; 8     8     3 0.006</span></a></code></pre></div>
<p>Note that you are presented with a count column and a pct column.</p>
<p>Let’s add weights</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">cces <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="st">  </span><span class="kw"><a href="reference/ct.html">ct</a></span>(race, commonweight_vv)</a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co">#&gt; # A tibble: 8 x 3</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="co">#&gt;    race       n   pct</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="co">#&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">#&gt; 1     1 348.    0.758</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co">#&gt; 2     2  43.9   0.096</span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="co">#&gt; 3     3  34.0   0.074</span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="co">#&gt; 4     4   7.09  0.015</span></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="co">#&gt; 5     5   3.87  0.008</span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="co">#&gt; 6     6  15.2   0.033</span></a>
<a class="sourceLine" id="cb3-12" title="12"><span class="co">#&gt; 7     7   6.33  0.014</span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="co">#&gt; 8     8   0.704 0.002</span></a></code></pre></div>
<p>Notice that it’s pipeable. And if you don’t include the weight variable then it won’t be calculated with a weight.</p>
<p>I’ve also added the ability to filter out the NA’s before the calculation is made.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">cces <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">race2 =</span> <span class="kw"><a href="reference/frcode.html">frcode</a></span>(race <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">~</span><span class="st"> "White"</span>,</a>
<a class="sourceLine" id="cb4-3" title="3">                        race <span class="op">==</span><span class="st"> </span><span class="dv">2</span> <span class="op">~</span><span class="st"> "Black"</span>, </a>
<a class="sourceLine" id="cb4-4" title="4">                        race <span class="op">==</span><span class="st"> </span><span class="dv">3</span> <span class="op">~</span><span class="st"> "Hispanic"</span>,</a>
<a class="sourceLine" id="cb4-5" title="5">                        race <span class="op">==</span><span class="st"> </span><span class="dv">4</span> <span class="op">~</span><span class="st"> "Asian"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="st">  </span><span class="kw"><a href="reference/ct.html">ct</a></span>(race2, commonweight_vv)</a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">#&gt; # A tibble: 5 x 3</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="co">#&gt;   race2         n   pct</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co">#&gt;   &lt;fct&gt;     &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="co">#&gt; 1 White    348.   0.758</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="co">#&gt; 2 Black     43.9  0.096</span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="co">#&gt; 3 Hispanic  34.0  0.074</span></a>
<a class="sourceLine" id="cb4-13" title="13"><span class="co">#&gt; 4 Asian      7.09 0.015</span></a>
<a class="sourceLine" id="cb4-14" title="14"><span class="co">#&gt; 5 &lt;NA&gt;      26.1  0.057</span></a>
<a class="sourceLine" id="cb4-15" title="15">  </a>
<a class="sourceLine" id="cb4-16" title="16">cces <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-17" title="17"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">race2 =</span> <span class="kw"><a href="reference/frcode.html">frcode</a></span>(race <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">~</span><span class="st"> "White"</span>,</a>
<a class="sourceLine" id="cb4-18" title="18">                        race <span class="op">==</span><span class="st"> </span><span class="dv">2</span> <span class="op">~</span><span class="st"> "Black"</span>, </a>
<a class="sourceLine" id="cb4-19" title="19">                        race <span class="op">==</span><span class="st"> </span><span class="dv">3</span> <span class="op">~</span><span class="st"> "Hispanic"</span>,</a>
<a class="sourceLine" id="cb4-20" title="20">                        race <span class="op">==</span><span class="st"> </span><span class="dv">4</span> <span class="op">~</span><span class="st"> "Asian"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-21" title="21"><span class="st">  </span><span class="kw"><a href="reference/ct.html">ct</a></span>(race2, <span class="dt">show_na =</span> <span class="ot">FALSE</span>, commonweight_vv)</a>
<a class="sourceLine" id="cb4-22" title="22"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb4-23" title="23"><span class="co">#&gt;   race2         n   pct</span></a>
<a class="sourceLine" id="cb4-24" title="24"><span class="co">#&gt;   &lt;fct&gt;     &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb4-25" title="25"><span class="co">#&gt; 1 White    348.   0.804</span></a>
<a class="sourceLine" id="cb4-26" title="26"><span class="co">#&gt; 2 Black     43.9  0.101</span></a>
<a class="sourceLine" id="cb4-27" title="27"><span class="co">#&gt; 3 Hispanic  34.0  0.078</span></a>
<a class="sourceLine" id="cb4-28" title="28"><span class="co">#&gt; 4 Asian      7.09 0.016</span></a></code></pre></div>
<p>This behavior is off by default, however.</p>
</div>
<div id="getting-confidence-intervals" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-confidence-intervals" class="anchor"></a>Getting Confidence Intervals</h2>
<p>Oftentimes in social science we like to see what our 95% confidence intervals are, but that’s a lot of syntax. It’s easy with the <code>mean_ci</code> function. I found the basic syntax on a Stack Overflow <a href="https://stackoverflow.com/questions/35953394/calculating-length-of-95-ci-using-dplyr">post</a>, from the user <a href="https://stackoverflow.com/users/3277821/sboysel">sboysel</a>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">cces <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="st">  </span><span class="kw"><a href="reference/mean_ci.html">mean_ci</a></span>(gender)</a>
<a class="sourceLine" id="cb5-3" title="3"><span class="co">#&gt; # A tibble: 1 x 7</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="co">#&gt;    mean    sd     n level     se lower upper</span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="co">#&gt; 1  1.54 0.499   500  0.05 0.0223  1.49  1.58</span></a></code></pre></div>
<p>The default is a 95% confidence interval. However that can be changed easily.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">cces <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="st">  </span><span class="kw"><a href="reference/mean_ci.html">mean_ci</a></span>(gender, <span class="dt">ci =</span> <span class="fl">.84</span>)</a>
<a class="sourceLine" id="cb6-3" title="3"><span class="co">#&gt; # A tibble: 1 x 7</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="co">#&gt;    mean    sd     n level     se lower upper</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="co">#&gt; 1  1.54 0.499   500  0.16 0.0223  1.50  1.57</span></a></code></pre></div>
<p>This can also take weights.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">cces <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="st">  </span><span class="kw"><a href="reference/mean_ci.html">mean_ci</a></span>(gender, <span class="dt">ci =</span> <span class="fl">.84</span>, <span class="dt">wt =</span> commonweight_vv)</a>
<a class="sourceLine" id="cb7-3" title="3"><span class="co">#&gt; # A tibble: 1 x 6</span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="co">#&gt;    mean    sd     n     se lower upper</span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="co">#&gt; 1  1.50 0.499   500 0.0223  1.47  1.53</span></a></code></pre></div>
</div>
<div id="simple-mean-and-median" class="section level2">
<h2 class="hasAnchor">
<a href="#simple-mean-and-median" class="anchor"></a>Simple Mean and Median</h2>
<p>I wanted a simple function to calculate the mean and the median. It takes just one variable and computes both statistics.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">money1 &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">"https://raw.githubusercontent.com/ryanburge/pls2003_sp17/master/sal_work.csv"</span>)</a>
<a class="sourceLine" id="cb8-2" title="2"></a>
<a class="sourceLine" id="cb8-3" title="3">money1 </a>
<a class="sourceLine" id="cb8-4" title="4"><span class="co">#&gt; # A tibble: 1,025 x 3</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="co">#&gt;       X1 salary names             </span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="co">#&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;             </span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="co">#&gt;  1     1  14736 Darin Casem       </span></a>
<a class="sourceLine" id="cb8-8" title="8"><span class="co">#&gt;  2     2  21261 Jaelyn Groesbeck  </span></a>
<a class="sourceLine" id="cb8-9" title="9"><span class="co">#&gt;  3     3  16831 Theodis Butler    </span></a>
<a class="sourceLine" id="cb8-10" title="10"><span class="co">#&gt;  4     4  34400 Joewid Rettig     </span></a>
<a class="sourceLine" id="cb8-11" title="11"><span class="co">#&gt;  5     5  31239 Breianna Gilbert  </span></a>
<a class="sourceLine" id="cb8-12" title="12"><span class="co">#&gt;  6     6  51580 Marcus Gray II    </span></a>
<a class="sourceLine" id="cb8-13" title="13"><span class="co">#&gt;  7     7  49699 Berenice Garcia   </span></a>
<a class="sourceLine" id="cb8-14" title="14"><span class="co">#&gt;  8     8  66805 Elijah Garrett    </span></a>
<a class="sourceLine" id="cb8-15" title="15"><span class="co">#&gt;  9     9  49321 Jeremiah Bishop Jr</span></a>
<a class="sourceLine" id="cb8-16" title="16"><span class="co">#&gt; 10    10  67126 Sultana al-Jabbour</span></a>
<a class="sourceLine" id="cb8-17" title="17"><span class="co">#&gt; # ... with 1,015 more rows</span></a>
<a class="sourceLine" id="cb8-18" title="18"></a>
<a class="sourceLine" id="cb8-19" title="19">money1  <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-20" title="20"><span class="st">  </span><span class="kw"><a href="reference/mean_med.html">mean_med</a></span>(salary)</a>
<a class="sourceLine" id="cb8-21" title="21"><span class="co">#&gt; # A tibble: 1 x 2</span></a>
<a class="sourceLine" id="cb8-22" title="22"><span class="co">#&gt;       mean median</span></a>
<a class="sourceLine" id="cb8-23" title="23"><span class="co">#&gt;      &lt;dbl&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb8-24" title="24"><span class="co">#&gt; 1 1247953.  35853</span></a></code></pre></div>
</div>
<div id="two-value-correlations" class="section level2">
<h2 class="hasAnchor">
<a href="#two-value-correlations" class="anchor"></a>Two Value Correlations</h2>
<p>Here’s a simple function that generates a pearson correlation of two variables with a p-value.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">x &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">7</span>, <span class="dv">5</span>, <span class="dv">777</span>, <span class="dv">6</span>, <span class="dv">411</span>, <span class="dv">8</span>)</a>
<a class="sourceLine" id="cb9-2" title="2">y &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">11</span>, <span class="dv">23</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">22455</span>, <span class="dv">34</span>, <span class="dv">22</span>, <span class="dv">22</span>)</a>
<a class="sourceLine" id="cb9-3" title="3">z &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">34</span>, <span class="dv">3</span>, <span class="dv">21</span>, <span class="dv">4555</span>, <span class="dv">75</span>, <span class="dv">2</span>, <span class="dv">3334</span>, <span class="dv">1122</span>, <span class="dv">22312</span>)</a>
<a class="sourceLine" id="cb9-4" title="4"></a>
<a class="sourceLine" id="cb9-5" title="5">test &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(x,y,z) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.tibble</span>()</a>
<a class="sourceLine" id="cb9-6" title="6"></a>
<a class="sourceLine" id="cb9-7" title="7">test <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(z <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-9" title="9"><span class="st">  </span><span class="kw"><a href="reference/corr.html">corr</a></span>(x,y)</a>
<a class="sourceLine" id="cb9-10" title="10"><span class="co">#&gt; # A tibble: 1 x 8</span></a>
<a class="sourceLine" id="cb9-11" title="11"><span class="co">#&gt;   estimate statistic p.value     n conf.low conf.high method                               alternative</span></a>
<a class="sourceLine" id="cb9-12" title="12"><span class="co">#&gt;      &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;                                &lt;chr&gt;      </span></a>
<a class="sourceLine" id="cb9-13" title="13"><span class="co">#&gt; 1    0.288     0.673   0.531     5   -0.594     0.856 Pearson's product-moment correlation two.sided</span></a></code></pre></div>
</div>
<div id="bind-several-dataframes-together" class="section level2">
<h2 class="hasAnchor">
<a href="#bind-several-dataframes-together" class="anchor"></a>Bind Several Dataframes together</h2>
<p>Oftentimes I make many little dataframes that I need to bind_rows to put into one large dataframe. As long as those dataframes have the same naming convention that can be done.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">dd1 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">a =</span> <span class="dv">1</span>, <span class="dt">b =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb10-2" title="2">dd2 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">a =</span> <span class="dv">3</span>, <span class="dt">b =</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb10-3" title="3">dd3 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">a =</span> <span class="dv">5</span>, <span class="dt">b =</span> <span class="dv">6</span>) </a>
<a class="sourceLine" id="cb10-4" title="4"></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="kw"><a href="reference/bind_df.html">bind_df</a></span>(<span class="st">"dd"</span>)</a>
<a class="sourceLine" id="cb10-6" title="6"><span class="co">#&gt;   a b</span></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="co">#&gt; 1 1 2</span></a>
<a class="sourceLine" id="cb10-8" title="8"><span class="co">#&gt; 2 3 4</span></a>
<a class="sourceLine" id="cb10-9" title="9"><span class="co">#&gt; 3 5 6</span></a></code></pre></div>
</div>
<div id="recode-things-and-keep-the-factor-levels" class="section level2">
<h2 class="hasAnchor">
<a href="#recode-things-and-keep-the-factor-levels" class="anchor"></a>Recode things and keep the factor levels</h2>
<p>I recode all the time, but unfortunately when you recode from numeric to character the factor levels are plotted in alphabetical order. There’s a way around that now. This uses the <code>case_when</code> function from <code>dplyr</code> but makes sure that the factors level are the same order of how they are specified in the function.</p>
<p>I found this <a href="https://stackoverflow.com/questions/49572416/r-convert-to-factor-with-order-of-levels-same-with-case-when">terrific function</a> written by <a href="https://stackoverflow.com/users/5068121/dennis-yl">Dennis YL</a>, where he had the same problem that I had.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">cces &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">"https://raw.githubusercontent.com/ryanburge/cces/master/CCES%20for%20Methods/small_cces.csv"</span>)</a>
<a class="sourceLine" id="cb11-2" title="2"></a>
<a class="sourceLine" id="cb11-3" title="3">graph &lt;-<span class="st"> </span>cces <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">pid_new =</span> <span class="kw"><a href="reference/frcode.html">frcode</a></span>(pid7 <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">~</span><span class="st"> "Strong Democrat"</span>, </a>
<a class="sourceLine" id="cb11-5" title="5">                          pid7 <span class="op">==</span><span class="st"> </span><span class="dv">2</span> <span class="op">~</span><span class="st"> "Not Strong Democrat"</span>, </a>
<a class="sourceLine" id="cb11-6" title="6">                          pid7 <span class="op">==</span><span class="st"> </span><span class="dv">3</span> <span class="op">~</span><span class="st"> "Lean Democrat"</span>, </a>
<a class="sourceLine" id="cb11-7" title="7">                          pid7 <span class="op">==</span><span class="st"> </span><span class="dv">4</span> <span class="op">~</span><span class="st"> "Independent"</span>, </a>
<a class="sourceLine" id="cb11-8" title="8">                          pid7 <span class="op">==</span><span class="st"> </span><span class="dv">5</span> <span class="op">~</span><span class="st"> "Lean Republican"</span>, </a>
<a class="sourceLine" id="cb11-9" title="9">                          pid7 <span class="op">==</span><span class="st"> </span><span class="dv">6</span> <span class="op">~</span><span class="st"> "Not Strong Republican"</span>, </a>
<a class="sourceLine" id="cb11-10" title="10">                          pid7 <span class="op">==</span><span class="st"> </span><span class="dv">7</span> <span class="op">~</span><span class="st"> "Strong Republican"</span>, </a>
<a class="sourceLine" id="cb11-11" title="11">                          <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> "REMOVE"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-12" title="12"><span class="st">  </span><span class="kw"><a href="reference/ct.html">ct</a></span>(pid_new)</a>
<a class="sourceLine" id="cb11-13" title="13"></a>
<a class="sourceLine" id="cb11-14" title="14"></a>
<a class="sourceLine" id="cb11-15" title="15">graph <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-16" title="16"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(pid_new <span class="op">!=</span><span class="st"> "REMOVE"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-17" title="17"><span class="st">  </span><span class="kw">ggplot</span>(., <span class="kw">aes</span>(<span class="dt">x =</span> pid_new, <span class="dt">y =</span> pct)) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-18" title="18"><span class="st">  </span><span class="kw">geom_col</span>()</a></code></pre></div>
<div class="figure">
<img src="https://raw.githubusercontent.com/ryanburge/socsci/master/README-unnamed-chunk-11-1.png" alt="Caption for the picture."><p class="caption">Caption for the picture.</p>
</div>
</div>
<div id="making-a-quick-crosstab-heatmap" class="section level2">
<h2 class="hasAnchor">
<a href="#making-a-quick-crosstab-heatmap" class="anchor"></a>Making A Quick Crosstab Heatmap</h2>
<p>Making a crosstab is one of the building blocks of social science statistics. This function visualizes that crosstab. The first variable is the one that is grouped and the second is the one that is counted</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">cces <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">pid_new =</span> <span class="kw"><a href="reference/frcode.html">frcode</a></span>(pid7 <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">~</span><span class="st"> "Strong Democrat"</span>, </a>
<a class="sourceLine" id="cb12-3" title="3">                          pid7 <span class="op">==</span><span class="st"> </span><span class="dv">2</span> <span class="op">~</span><span class="st"> "Not Strong Democrat"</span>, </a>
<a class="sourceLine" id="cb12-4" title="4">                          pid7 <span class="op">==</span><span class="st"> </span><span class="dv">3</span> <span class="op">~</span><span class="st"> "Lean Democrat"</span>, </a>
<a class="sourceLine" id="cb12-5" title="5">                          pid7 <span class="op">==</span><span class="st"> </span><span class="dv">4</span> <span class="op">~</span><span class="st"> "Independent"</span>, </a>
<a class="sourceLine" id="cb12-6" title="6">                          pid7 <span class="op">==</span><span class="st"> </span><span class="dv">5</span> <span class="op">~</span><span class="st"> "Lean Republican"</span>, </a>
<a class="sourceLine" id="cb12-7" title="7">                          pid7 <span class="op">==</span><span class="st"> </span><span class="dv">6</span> <span class="op">~</span><span class="st"> "Not Strong Republican"</span>, </a>
<a class="sourceLine" id="cb12-8" title="8">                          pid7 <span class="op">==</span><span class="st"> </span><span class="dv">7</span> <span class="op">~</span><span class="st"> "Strong Republican"</span>, </a>
<a class="sourceLine" id="cb12-9" title="9">                          <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> "All Others"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-10" title="10"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">gender =</span> <span class="kw"><a href="reference/frcode.html">frcode</a></span>(gender <span class="op">==</span><span class="dv">1</span> <span class="op">~</span><span class="st"> "Male"</span>,</a>
<a class="sourceLine" id="cb12-11" title="11">                         gender <span class="op">==</span><span class="dv">2</span> <span class="op">~</span><span class="st"> "Female"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-12" title="12"><span class="st">  </span><span class="kw"><a href="reference/xheat.html">xheat</a></span>(gender, pid_new) </a></code></pre></div>
<div class="figure">
<img src="https://raw.githubusercontent.com/ryanburge/socsci/master/README-unnamed-chunk-12-1.png" alt="Caption for the picture."><p class="caption">Caption for the picture.</p>
</div>
<p>And, you can quickly add the sample size to the graph.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">cces <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">pid_new =</span> <span class="kw"><a href="reference/frcode.html">frcode</a></span>(pid7 <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">~</span><span class="st"> "Strong Democrat"</span>, </a>
<a class="sourceLine" id="cb13-3" title="3">                          pid7 <span class="op">==</span><span class="st"> </span><span class="dv">2</span> <span class="op">~</span><span class="st"> "Not Strong Democrat"</span>, </a>
<a class="sourceLine" id="cb13-4" title="4">                          pid7 <span class="op">==</span><span class="st"> </span><span class="dv">3</span> <span class="op">~</span><span class="st"> "Lean Democrat"</span>, </a>
<a class="sourceLine" id="cb13-5" title="5">                          pid7 <span class="op">==</span><span class="st"> </span><span class="dv">4</span> <span class="op">~</span><span class="st"> "Independent"</span>, </a>
<a class="sourceLine" id="cb13-6" title="6">                          pid7 <span class="op">==</span><span class="st"> </span><span class="dv">5</span> <span class="op">~</span><span class="st"> "Lean Republican"</span>, </a>
<a class="sourceLine" id="cb13-7" title="7">                          pid7 <span class="op">==</span><span class="st"> </span><span class="dv">6</span> <span class="op">~</span><span class="st"> "Not Strong Republican"</span>, </a>
<a class="sourceLine" id="cb13-8" title="8">                          pid7 <span class="op">==</span><span class="st"> </span><span class="dv">7</span> <span class="op">~</span><span class="st"> "Strong Republican"</span>, </a>
<a class="sourceLine" id="cb13-9" title="9">                          <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> "All Others"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-10" title="10"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">gender =</span> <span class="kw"><a href="reference/frcode.html">frcode</a></span>(gender <span class="op">==</span><span class="dv">1</span> <span class="op">~</span><span class="st"> "Male"</span>,</a>
<a class="sourceLine" id="cb13-11" title="11">                         gender <span class="op">==</span><span class="dv">2</span> <span class="op">~</span><span class="st"> "Female"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-12" title="12"><span class="st">  </span><span class="kw"><a href="reference/xheat.html">xheat</a></span>(gender, pid_new, <span class="dt">count =</span> <span class="ot">TRUE</span>) </a></code></pre></div>
<div class="figure">
<img src="https://raw.githubusercontent.com/ryanburge/socsci/master/README-unnamed-chunk-13-1.png" alt="Caption for the picture."><p class="caption">Caption for the picture.</p>
</div>
<ul>
<li>let me know what you think on twitter <a href="https://twitter.com/ryanburge"><span class="citation">@ryanburge</span></a>
</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/ryanburge/socsci">https://​github.com/​ryanburge/​socsci</a>
</li>
<li>Report a bug at <br><a href="https://github.com/ryanburge/socsci/issues">https://​github.com/​ryanburge/​socsci/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Ryan Burge <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Ryan Burge.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9100.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
